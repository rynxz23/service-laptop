<!doctype html>
<html lang="id">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Smart Laptop Repair Assistant — HTML</title>
<style>
  :root{--bg:#0d0d0d;--panel:#121212;--muted:#9aa0a6;--accent:#d90000;--text:#e7e7e7}
  html,body{height:100%;}
  body{margin:0;font-family:Inter,Segoe UI,system-ui,Arial;background:linear-gradient(180deg,#070707,#0f0f12);color:var(--text);display:flex;align-items:center;justify-content:center;padding:28px}
  .card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));width:100%;max-width:1000px;border-radius:12px;padding:22px;box-shadow:0 8px 30px rgba(0,0,0,0.6);border:1px solid rgba(255,255,255,0.03)}
  h1{margin:0 0 6px 0;font-size:20px}
  p.lead{margin:0 0 18px 0;color:var(--muted);font-size:13px}
  .search-row{display:flex;gap:12px}
  input[type=text]{flex:1;padding:12px 14px;border-radius:10px;border:1px solid rgba(255,255,255,0.04);background:#0b0b0b;color:var(--text);outline:none;font-size:14px}
  button[type=button]{background:var(--accent);border:none;padding:10px 14px;border-radius:10px;color:#fff;cursor:pointer;font-weight:600}
  .results{margin-top:18px;display:grid;grid-template-columns:1fr;gap:12px}
  .result{background:#0b0b0b;padding:14px;border-radius:10px;border:1px solid rgba(255,255,255,0.03)}
  .score{font-size:12px;color:var(--muted);margin-bottom:6px}
  .issue{font-weight:700;margin:0 0 6px 0}
  .desc{margin:0 0 8px 0;color:#d3d3d3;font-size:14px}
  .sol{font-size:13px;color:#cfcfcf}
  .meta{display:flex;gap:8px;align-items:center;margin-top:8px}
  .chip{font-size:12px;padding:6px 8px;border-radius:999px;background:rgba(255,255,255,0.02);border:1px solid rgba(255,255,255,0.02);color:var(--muted)}
  footer{margin-top:18px;color:var(--muted);font-size:12px}
  @media (min-width:720px){.results{grid-template-columns:1fr 1fr;}}
</style>
</head>
<body>
<div class="card" role="application">
  <h1>Smart Laptop Repair Assistant (HTML)</h1>
  <p class="lead">Versi klien — seluruh logika berjalan di browser. Ketik masalah (ID/EN/IN) lalu tekan Cari.</p>

  <div class="search-row">
    <input id="q" type="text" placeholder="Contoh: laptop tidak menyala atau layar blank setelah boot" />
    <button id="btn">Cari</button>
  </div>

  <div id="results" class="results" aria-live="polite"></div>
  <footer>Dataset contoh 80+ entri · Preprocessing: normalize, token, stem sederhana · Similarity: TF‑IDF + Cosine</footer>
</div>

<script>
// ===== Dataset (diambil dari versi PHP) =====
const DATA = [
  {id:"1",issue:"Laptop tidak menyala",description:"Tidak ada lampu indikator dan tidak merespon tombol power",solution:"Periksa charger, baterai, motherboard"},
  {id:"2",issue:"Layar blank",description:"Layar hitam setelah boot",solution:"Coba monitor eksternal, cek kabel LCD"},
  {id:"3",issue:"Baterai cepat habis",description:"Battery drain tinggi",solution:"Kalibrasi baterai atau ganti baterai"},
  {id:"4",issue:"Kipas berisik",description:"Fan speed tinggi terus",solution:"Bersihkan fan, ganti thermal paste"},
  {id:"5",issue:"Keyboard tidak berfungsi",description:"Beberapa tombol mati",solution:"Bersihkan keyboard atau ganti modul keyboard"},
  {id:"6",issue:"Blue Screen (BSOD)",description:"Muncul layar biru error saat digunakan",solution:"Periksa driver, RAM, update Windows"},
  {id:"7",issue:"Touchpad tidak berfungsi",description:"Cursor tidak bergerak ketika disentuh",solution:"Aktifkan touchpad dan update driver"},
  {id:"8",issue:"Overheat saat gaming",description:"Laptop cepat panas ketika bermain game",solution:"Bersihkan fan dan gunakan cooling pad"},
  {id:"9",issue:"HDD berbunyi",description:"Suara klik dari harddisk",solution:"Backup data dan ganti HDD"},
  {id:"10",issue:"SSD tidak terbaca",description:"SSD tidak muncul di BIOS",solution:"Coba port lain atau update firmware"},
  {id:"11",issue:"WiFi sering putus",description:"Koneksi wifi disconnect berkali-kali",solution:"Update driver WiFi atau reset router"},
  {id:"12",issue:"Bluetooth tidak aktif",description:"Bluetooth tidak muncul di Device Manager",solution:"Install ulang driver bluetooth"},
  {id:"13",issue:"Speaker tidak berbunyi",description:"Tidak ada suara meski volume penuh",solution:"Periksa driver audio, coba headset"},
  {id:"14",issue:"Webcam tidak terdeteksi",description:"Kamera tidak muncul",solution:"Periksa privacy settings dan driver webcam"},
  {id:"15",issue:"Port USB tidak berfungsi",description:"USB tidak membaca perangkat",solution:"Periksa driver USB dan bersihkan port"},
  {id:"16",issue:"Laptop restart sendiri",description:"Laptop restart tanpa peringatan",solution:"Cek RAM, power supply, suhu CPU"},
  {id:"17",issue:"Laptop mati tiba-tiba",description:"Tiba-tiba mati saat digunakan",solution:"Cek overheat atau kerusakan motherboard"},
  {id:"18",issue:"Aplikasi sering crash",description:"App berhenti bekerja",solution:"Update aplikasi, cek RAM, scan malware"},
  {id:"19",issue:"Windows gagal booting",description:"Stuck di logo Windows",solution:"Startup repair atau install ulang"},
  {id:"20",issue:"BIOS tidak bisa diakses",description:"Tidak merespon tombol BIOS",solution:"Reset BIOS melalui jumper"},
  {id:"21",issue:"Charging tidak masuk",description:"Charger terhubung tapi tidak mengisi",solution:"Ganti charger atau cek IC charging"},
  {id:"22",issue:"Battery not detected",description:"Baterai tidak terbaca Windows",solution:"Reseat baterai atau ganti modul baterai"},
  {id:"23",issue:"Keyboard mengetik sendiri",description:"Tombol menekan tanpa input",solution:"Bersihkan keyboard atau ganti fleksibel"},
  {id:"24",issue:"Touchpad bergerak sendiri",description:"Cursor bergerak acak",solution:"Bersihkan permukaan atau matikan palm check"},
  {id:"25",issue:"Layar bergaris",description:"Ada garis horizontal/vertikal",solution:"Ganti kabel LCD atau panel LCD"},
  {id:"26",issue:"Layar flickering",description:"Layar berkedip",solution:"Update driver GPU dan cek fleksibel LCD"},
  {id:"27",issue:"Brightness tidak bisa diubah",description:"Brightness stuck",solution:"Reinstall driver display"},
  {id:"28",issue:"GPU overheating",description:"VGA sangat panas",solution:"Ganti thermal paste dan bersihkan heatsink"},
  {id:"29",issue:"FPS drop parah",description:"Game tiba-tiba lag",solution:"Update driver GPU dan matikan background apps"},
  {id:"30",issue:"Fan tidak berputar",description:"Kipas mati total",solution:"Ganti fan atau cek soket fan"},
  {id:"31",issue:"Motherboard short",description:"Tercium bau gosong atau short",solution:"Service motherboard atau ganti komponen"},
  {id:"32",issue:"RAM tidak terbaca",description:"Hanya terbaca setengah",solution:"Bersihkan slot RAM atau ganti modul"},
  {id:"33",issue:"RAM error beep",description:"Laptop tidak menyala dan berbunyi beep",solution:"Reseat RAM atau ganti RAM"},
  {id:"34",issue:"HDD 100% usage",description:"Disk usage tinggi terus",solution:"Disable Windows search dan update driver"},
  {id:"35",issue:"Selalu boot ke BIOS",description:"Tidak masuk OS",solution:"Cek bootloader dan drive OS"},
  {id:"36",issue:"Windows activation hilang",description:"Lisensi tidak terbaca",solution:"Login Microsoft account atau reaktivasi"},
  {id:"37",issue:"Sistem terlalu lambat",description:"Laptop jadi lemot",solution:"Upgrade ke SSD dan tambah RAM"},
  {id:"38",issue:"Program error 0xc000",description:"Aplikasi tidak bisa dibuka",solution:"Reinstall aplikasi atau cek file system"},
  {id:"39",issue:"Touchscreen tidak merespon",description:"Layar sentuh mati",solution:"Kalibrasi dan reinstall driver touchscreen"},
  {id:"40",issue:"Bau hangus dari laptop",description:"Bau terbakar dari ventilasi",solution:"Matikan segera dan periksa PSU/motherboard"},
  {id:"41",issue:"Port HDMI tidak bekerja",description:"Tidak ada output ke monitor",solution:"Update GPU dan cek kabel HDMI"},
  {id:"42",issue:"Port LAN mati",description:"Kabel LAN terhubung tapi tidak connect",solution:"Reinstall driver LAN"},
  {id:"43",issue:"Blue screen nvlddmkm.sys",description:"Error driver NVIDIA",solution:"Rollback driver NVIDIA"},
  {id:"44",issue:"Overheat idle",description:"Panas meski tidak dipakai",solution:"Cek background task dan ganti thermal paste"},
  {id:"45",issue:"Charger panas berlebih",description:"Adaptor sangat panas",solution:"Ganti adaptor dengan yang original"},
  {id:"46",issue:"Baterai mengembang",description:"Baterai menggembung",solution:"Segera ganti baterai"},
  {id:"47",issue:"Audio crackling",description:"Suara pecah",solution:"Update driver audio dan cek speaker"},
  {id:"48",issue:"Keyboard delay",description:"Input keyboard lambat",solution:"Matikan filter keys dan cek driver"},
  {id:"49",issue:"File system corrupted",description:"Sistem rusak",solution:"Jalankan CHKDSK dan SFC"},
  {id:"50",issue:"Virus/Malware",description:"Banyak pop-up dan aplikasi aneh",solution:"Scan antivirus dan reset Windows"},
  {id:"51",issue:"Fan selalu 100%",description:"Kipas selalu maksimal",solution:"Update BIOS dan bersihkan heatsink"},
  {id:"52",issue:"Bios corrupt",description:"Tidak bisa masuk BIOS",solution:"Flash ulang BIOS"},
  {id:"53",issue:"Touchpad terlalu sensitif",description:"Cursor bergerak cepat",solution:"Atur sensitivity di control panel"},
  {id:"54",issue:"Bluetooth sering disconnect",description:"Bluetooth putus-putus",solution:"Ganti driver bluetooth"},
  {id:"55",issue:"Laptop sering freeze",description:"Laptop hang",solution:"Cek SSD/RAM dan update driver"},
  {id:"56",issue:"Aroma plastik terbakar",description:"Bau plastik dari laptop",solution:"Sumber panas berlebih, periksa motherboard"},
  {id:"57",issue:"Fan klik-klik",description:"Bunyi klik pada fan",solution:"Ganti fan"},
  {id:"58",issue:"Keyboard double input",description:"Mengetik huruf dua kali",solution:"Ganti keyboard"},
  {id:"59",issue:"Trackpad ghost touch",description:"Touchpad klik sendiri",solution:"Matikan tap-to-click atau ganti modul"},
  {id:"60",issue:"WiFi no internet",description:"Ada wifi tapi no internet",solution:"Reset IP dan DNS"},
  {id:"61",issue:"Sensor baterai error",description:"Persentase baterai tidak akurat",solution:"Kalibrasi baterai"},
  {id:"62",issue:"Driver konflik",description:"Driver bentrok setelah update",solution:"Rollback driver"},
  {id:"63",issue:"CPU throttling",description:"Speed CPU turun drastis",solution:"Bersihkan fan dan update BIOS"},
  {id:"64",issue:"GPU throttling",description:"GPU turun performa",solution:"Ganti thermal pad GPU"},
  {id:"65",issue:"Laptop lambat boot",description:"Booting lama",solution:"Upgrade SSD dan perbaiki startup"},
  {id:"66",issue:"Black screen setelah sleep",description:"Tidak muncul display",solution:"Disable fast boot atau update driver"},
  {id:"67",issue:"Keyboard RGB mati",description:"Lampu RGB tidak menyala",solution:"Install software bawaan keyboard"},
  {id:"68",issue:"Logo Windows looping",description:"Tidak masuk desktop",solution:"Automatic repair atau install ulang"},
  {id:"69",issue:"Auto shutdown",description:"Laptop mati sendiri saat panas",solution:"Ganti thermal paste"},
  {id:"70",issue:"Charging port longgar",description:"Port charger goyang",solution:"Solder ulang port DC"},
  {id:"71",issue:"Layarnya glitch",description:"Visual glitch atau artefak",solution:"Cek GPU dan kabel LCD"},
  {id:"72",issue:"Suhu idle tinggi",description:"CPU panas saat idle",solution:"Bersihkan fan dan cek background apps"},
  {id:"73",issue:"Windows update error",description:"Gagal install update",solution:"Reset Windows update"},
  {id:"74",issue:"SSD slow write",description:"Kecepatan tulis lambat",solution:"Update firmware SSD"},
  {id:"75",issue:"Laptop berbau asap",description:"Ada asap dari laptop",solution:"Matikan segera dan servis"},
  {id:"76",issue:"Baterai tidak penuh",description:"Stuck di 80%",solution:"Matikan battery protection di BIOS"},
  {id:"77",issue:"WiFi tidak muncul",description:"Tidak tersedia di device manager",solution:"Reinstall wireless driver"},
  {id:"78",issue:"LCD backlight mati",description:"Layar gelap tetapi gambar ada",solution:"Ganti lampu backlight atau inverter"},
  {id:"79",issue:"Laptop tidak bisa dimatikan",description:"Shutdown tapi tetap menyala",solution:"Disable fast startup"},
  {id:"80",issue:"Thermal throttle berat",description:"CPU turun ke 0.8GHz",solution:"Bersihkan heatsink dan flash BIOS"}
];

// ===== Preprocessing helpers =====
function normalizeText(s){
  return s.toLowerCase()
    .replace(/https?:\/\/\S+/g,' ')
    .replace(/[^a-z0-9\p{L}\s]+/gu,' ')
    .replace(/\s+/g,' ')
    .trim();
}

function stemWord(w){
  w = w.toLowerCase();
  const suffixes = ['lah','kah','nya','kan','an','i','ing','ed','s'];
  for(const s of suffixes){
    if(w.endsWith(s) && w.length > s.length + 2) return w.slice(0, -s.length);
  }
  return w;
}

const STOPWORDS = new Set(['dan','di','ke','yang','untuk','dengan','pada','adalah','ini','itu','a','an','the','of','in','on','at','is']);

function tokenizeAndStem(text){
  const norm = normalizeText(text);
  const toks = norm.split(' ').filter(Boolean);
  const out = [];
  for(const t of toks){
    if(!STOPWORDS.has(t) && t.length>1){ out.push(stemWord(t)); }
  }
  return out;
}

function buildTF(tokens){
  const tf = {};
  const len = Math.max(tokens.length, 1);
  for(const t of tokens){ tf[t] = (tf[t]||0)+1; }
  for(const k in tf) tf[k] = tf[k]/len;
  return tf;
}

function cosine(a,b){
  let dot=0, na=0, nb=0;
  for(const k in a){ dot += a[k] * (b[k]||0); na += a[k]*a[k]; }
  for(const k in b) nb += b[k]*b[k];
  if(na===0 || nb===0) return 0;
  return dot / (Math.sqrt(na)*Math.sqrt(nb));
}

// ===== Build TF-IDF for dataset =====
const docsTokens = DATA.map(d => tokenizeAndStem(d.issue + ' ' + d.description + ' ' + d.solution));
const N = docsTokens.length;
const df = {}; // document freq
for(const toks of docsTokens){
  const unique = new Set(toks);
  for(const t of unique){ df[t] = (df[t]||0)+1; }
}
const idf = {};
for(const term in df){ idf[term] = Math.log(N / (df[term] + 1)) + 1; }

const tfidfDocs = docsTokens.map(tokens=>{
  const tf = buildTF(tokens);
  const vec = {};
  for(const k in tf) vec[k] = tf[k] * (idf[k]||1);
  return vec;
});

// ===== Search =====
const qInput = document.getElementById('q');
const btn = document.getElementById('btn');
const out = document.getElementById('results');

function search(query){
  const qtokens = tokenizeAndStem(query);
  const qtf = buildTF(qtokens);
  const qvec = {};
  for(const k in qtf) qvec[k] = qtf[k] * (idf[k]||1);
  const scores = tfidfDocs.map((docVec,i)=>({i,score:cosine(qvec,docVec)})).filter(x=>x.score>0);
  scores.sort((a,b)=>b.score - a.score);
  return scores.map(s=>({score:s.score,data:DATA[s.i]}));
}

function renderResults(results){
  out.innerHTML = '';
  if(!results.length){ out.innerHTML = '<div class="chip">Tidak ada hasil relevan — coba kata kunci lain</div>'; return; }
  for(const r of results.slice(0,12)){
    const el = document.createElement('div'); el.className='result';
    el.innerHTML = `<div class="score">Score: ${r.score.toFixed(3)}</div>
      <div class="issue">${escapeHtml(r.data.issue)}</div>
      <div class="desc">${escapeHtml(r.data.description)}</div>
      <div class="sol"><strong>Solusi:</strong> ${escapeHtml(r.data.solution)}</div>
      <div class="meta"><div class="chip">ID: ${r.data.id}</div></div>`;
    out.appendChild(el);
  }
}

function escapeHtml(s){ return String(s).replace(/[&<>"']/g, c=>({"&":"&amp;","<":"&lt;",">":"&gt;","\"":"&quot;","'":"&#39;"}[c])); }

btn.addEventListener('click', ()=>{
  const q = qInput.value.trim();
  if(!q) return; const res = search(q); renderResults(res);
});

qInput.addEventListener('keydown', (e)=>{ if(e.key==='Enter'){ e.preventDefault(); btn.click(); } });

// Autofocus example and a tiny welcome example
qInput.value = '';
qInput.focus();
</script>
</body>
</html>
